{% extends 'Accounts/myaccount.html' %}
{% load static %}

{% block contentMyAccount %}

	{% if request.user.is_superuser %}
		
	<div class="container">
	  	<h3>Generate winners automatically</h3>

	  	<div class="row mt-4 mb-4"> 
	    	<div style="width: 100%; height:200px; overflow-y:auto;">
	        	<table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
	  		    <tr>
	  		        <th>idwinner</th>
	  		        <th>idemployee</th>
	  		        <th>idcodecompany</th>
	  		        <th>source</th>
	  		        <th>State</th>
	  		        <th>Active</th>
	  		        <th>createddate</th>
	  		    </tr>
	  		    {% for winner in allwinners %}
	  	      	<tr> 
	  		        <td>{{ winner.idwinner }}</td>
	  		        <td>{{ winner.idemployee }}</td>
	  		        <td>{{ winner.idcodecompany }}</td>
	  		        <td>{{ winner.source }}</td>
	  		        <td>{{ winner.state }}</td>
	  		        <td>{{ winner.active }}</td>
	  		        <td>{{ winner.createddate|date:"d-m-Y" }}</td>
	  		    </tr>
		  	    {% endfor %}
		  		</table>
		  	</div>
	  	</div>

	  	If you click in this button, it will generate winners for multiple companies.
	  	<br>
	  	<a href="{% url 'generateauomaticwinners_view' %}" id="generatewinners">Generate winners</a>


	  	<br>
	  	<hr class="style-two">
	  	<br>
	  	<h3>Generate winners automatically</h3>

	  	<form method="POST" action="{% url 'generatewinners_view' %}"> 
                        
          {% csrf_token %}
            
            <div class="form-row">
            	<div class="form-group col-md-6">
                {{ formWinner.idcodecompany }}
                  <div class="errorField">{{ formWinner.idcodecompany.errors.as_text }}</div>
              </div>
              <div class="form-group col-md-6">
                {{ formWinner.idemployee }}
                  <div class="errorField">{{ formWinner.idemployee.errors.as_text }}</div>
              </div>
              
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                {{ formWinner.source }}
                  <div class="errorField">{{ formWinner.source.errors.as_text }}</div>
              </div>
            </div>
            

            <br>

            <button class="buttonBecomePartner" href="a" >Add a new winner manually</button>
        </form>

	 </div>
    {% endif %}

{% endblock %}